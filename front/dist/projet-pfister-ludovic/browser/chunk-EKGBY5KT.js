import{a as y}from"./chunk-XZSYQJT2.js";import{b as D,d as w,e as I,h as E}from"./chunk-QBIJVOJ4.js";import"./chunk-BPMLG3PT.js";import{k,m as S}from"./chunk-SDRDLNE6.js";import{$a as d,Aa as l,Ja as s,Oa as v,Ta as u,aa as g,ab as e,ba as f,bb as n,cb as _,hb as C,ib as b,jb as c,ob as P,pb as i,qb as p,rb as h,sb as M,xb as O,ya as x}from"./chunk-4TET6FDT.js";var L=o=>["/pollutions",o,"edit"];function T(o,r){o&1&&(e(0,"div",4),i(1," Chargement des d\xE9tails... "),n())}function z(o,r){if(o&1&&(e(0,"div",5)(1,"p"),i(2),n(),e(3,"a",6),i(4,"Retour \xE0 la liste"),n()()),o&2){let t=c();l(2),p(t.error)}}function V(o,r){if(o&1&&(e(0,"div",26),_(1,"img",27),n()),o&2){let t=c(2);l(),d("src",t.pollution.photoUrl,x)("alt",t.pollution.titre)}}function j(o,r){if(o&1&&(e(0,"div",18)(1,"span",19),i(2,"\u{1F464} Signal\xE9 par"),n(),e(3,"span",20),i(4),n()()),o&2){let t=c(2);l(4),p(t.pollution.auteur)}}function F(o,r){if(o&1){let t=C();e(0,"div",7)(1,"div",8)(2,"a",9),i(3," \u2190 Retour \xE0 la liste "),n()(),e(4,"div",10),u(5,V,2,2,"div",11),e(6,"div",12)(7,"div",13)(8,"h1"),i(9),n(),e(10,"span",14),i(11),n()(),e(12,"div",15)(13,"h2"),i(14,"Description"),n(),e(15,"p",16),i(16),n()(),e(17,"div",15)(18,"h2"),i(19,"Informations"),n(),e(20,"div",17)(21,"div",18)(22,"span",19),i(23,"\u{1F4C5} Date d'observation"),n(),e(24,"span",20),i(25),n()(),e(26,"div",18)(27,"span",19),i(28,"\u{1F4CD} Lieu"),n(),e(29,"span",20),i(30),n()(),u(31,j,5,1,"div",21),e(32,"div",18)(33,"span",19),i(34,"\u{1F30D} Coordonn\xE9es GPS"),n(),e(35,"span",20),i(36),e(37,"button",22),b("click",function(){g(t);let m=c();return f(m.openInMaps())}),i(38," Voir sur la carte "),n()()()()(),e(39,"div",23)(40,"a",24),i(41," Modifier "),n(),e(42,"button",25),b("click",function(){g(t);let m=c();return f(m.deletePollution())}),i(43," Supprimer "),n()()()()()}if(o&2){let t=c();l(5),d("ngIf",t.pollution.photoUrl),l(4),p(t.pollution.titre),l(),P("badge-"+t.pollution.type.toLowerCase().replace(" ","-")),l(),h(" ",t.pollution.type," "),l(5),p(t.pollution.description),l(9),p(t.formatDate(t.pollution.dateObservation)),l(5),p(t.pollution.lieu),l(),d("ngIf",t.pollution.auteur),l(5),M(" ",t.pollution.latitude,", ",t.pollution.longitude," "),l(4),d("routerLink",O(12,L,t.pollution.id))}}var R=class o{constructor(r,t,a){this.route=r;this.router=t;this.pollutionService=a}pollution=null;loading=!1;error=null;ngOnInit(){let r=this.route.snapshot.paramMap.get("id");r&&this.loadPollution(+r)}loadPollution(r){this.loading=!0,this.error=null,this.pollutionService.getPollutionById(r).subscribe({next:t=>{this.pollution=t,this.loading=!1},error:t=>{this.error="Pollution introuvable",this.loading=!1,console.error("Erreur:",t)}})}deletePollution(){this.pollution?.id&&confirm("\xCAtes-vous s\xFBr de vouloir supprimer cette pollution ?")&&this.pollutionService.deletePollution(this.pollution.id).subscribe({next:()=>{this.router.navigate(["/pollutions"])},error:r=>{alert("Erreur lors de la suppression"),console.error("Erreur:",r)}})}formatDate(r){return new Date(r).toLocaleDateString("fr-FR",{day:"2-digit",month:"long",year:"numeric"})}openInMaps(){if(this.pollution){let r=`https://www.google.com/maps?q=${this.pollution.latitude},${this.pollution.longitude}`;window.open(r,"_blank")}}static \u0275fac=function(t){return new(t||o)(s(D),s(w),s(y))};static \u0275cmp=v({type:o,selectors:[["app-pollution-detail"]],decls:4,vars:3,consts:[[1,"detail-container"],["class","loading",4,"ngIf"],["class","error-box",4,"ngIf"],["class","detail-content",4,"ngIf"],[1,"loading"],[1,"error-box"],["routerLink","/pollutions",1,"btn","btn-back"],[1,"detail-content"],[1,"detail-header"],["routerLink","/pollutions",1,"btn-back-link"],[1,"detail-main"],["class","detail-image",4,"ngIf"],[1,"detail-info"],[1,"title-section"],[1,"badge"],[1,"section"],[1,"description"],[1,"info-grid"],[1,"info-item"],[1,"info-label"],[1,"info-value"],["class","info-item",4,"ngIf"],[1,"btn-map",3,"click"],[1,"actions-section"],[1,"btn","btn-edit",3,"routerLink"],[1,"btn","btn-delete",3,"click"],[1,"detail-image"],[3,"src","alt"]],template:function(t,a){t&1&&(e(0,"div",0),u(1,T,2,0,"div",1)(2,z,5,1,"div",2)(3,F,44,14,"div",3),n()),t&2&&(l(),d("ngIf",a.loading),l(),d("ngIf",a.error),l(),d("ngIf",a.pollution&&!a.loading&&!a.error))},dependencies:[S,k,E,I],styles:[".detail-container[_ngcontent-%COMP%]{max-width:1000px;margin:2rem auto;padding:0 1rem}.loading[_ngcontent-%COMP%], .error-box[_ngcontent-%COMP%]{background:#fff;padding:3rem;border-radius:8px;box-shadow:0 2px 8px #0000001a;text-align:center}.error-box[_ngcontent-%COMP%]{color:#f44336}.detail-header[_ngcontent-%COMP%]{margin-bottom:1.5rem}.btn-back-link[_ngcontent-%COMP%]{display:inline-block;color:#2196f3;text-decoration:none;font-weight:600;transition:color .3s}.btn-back-link[_ngcontent-%COMP%]:hover{color:#1976d2}.detail-content[_ngcontent-%COMP%]{background:#fff;border-radius:8px;box-shadow:0 2px 8px #0000001a;overflow:hidden}.detail-main[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr;gap:2rem}.detail-image[_ngcontent-%COMP%]{width:100%;max-height:500px;overflow:hidden}.detail-image[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:100%;object-fit:cover}.detail-info[_ngcontent-%COMP%]{padding:2rem}.title-section[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:start;gap:1rem;margin-bottom:2rem;padding-bottom:1.5rem;border-bottom:2px solid #f0f0f0}.title-section[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{margin:0;color:#333;flex:1}.badge[_ngcontent-%COMP%]{padding:.5rem 1rem;border-radius:20px;font-size:.9rem;font-weight:600;white-space:nowrap}.badge-plastique[_ngcontent-%COMP%]{background:#ffe5b4;color:#8b4513}.badge-chimique[_ngcontent-%COMP%]{background:#ffe4e1;color:#dc143c}.badge-d\\e9p\\f4t-sauvage[_ngcontent-%COMP%]{background:#e6e6fa;color:indigo}.badge-eau[_ngcontent-%COMP%]{background:#e0f2f7;color:#0277bd}.badge-air[_ngcontent-%COMP%]{background:#e8f5e9;color:#2e7d32}.badge-autre[_ngcontent-%COMP%]{background:#f5f5f5;color:#616161}.section[_ngcontent-%COMP%]{margin-bottom:2rem}.section[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:1.3rem;color:#333;margin-bottom:1rem}.description[_ngcontent-%COMP%]{line-height:1.8;color:#555;white-space:pre-wrap;background:#f9f9f9;padding:1.5rem;border-radius:8px}.info-grid[_ngcontent-%COMP%]{display:grid;gap:1.5rem}.info-item[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:.5rem}.info-label[_ngcontent-%COMP%]{font-weight:600;color:#666;font-size:.95rem}.info-value[_ngcontent-%COMP%]{color:#333;font-size:1.05rem;display:flex;align-items:center;gap:1rem}.btn-map[_ngcontent-%COMP%]{padding:.4rem .8rem;background:#4caf50;color:#fff;border:none;border-radius:4px;font-size:.85rem;cursor:pointer;transition:background .3s}.btn-map[_ngcontent-%COMP%]:hover{background:#45a049}.actions-section[_ngcontent-%COMP%]{display:flex;gap:1rem;padding-top:2rem;border-top:2px solid #f0f0f0}.btn[_ngcontent-%COMP%]{flex:1;padding:1rem;border:none;border-radius:4px;font-weight:600;font-size:1rem;cursor:pointer;text-align:center;text-decoration:none;transition:all .3s}.btn-edit[_ngcontent-%COMP%]{background:#2196f3;color:#fff}.btn-edit[_ngcontent-%COMP%]:hover{background:#1976d2}.btn-delete[_ngcontent-%COMP%]{background:#f44336;color:#fff}.btn-delete[_ngcontent-%COMP%]:hover{background:#d32f2f}.btn-back[_ngcontent-%COMP%]{display:inline-block;margin-top:1rem;padding:.75rem 1.5rem;background:#2196f3;color:#fff;text-decoration:none;border-radius:4px;transition:background .3s}.btn-back[_ngcontent-%COMP%]:hover{background:#1976d2}@media(max-width:768px){.title-section[_ngcontent-%COMP%], .actions-section[_ngcontent-%COMP%]{flex-direction:column}.detail-info[_ngcontent-%COMP%]{padding:1rem}}"]})};export{R as PollutionDetailComponent};
